config:
  network_cidr_base: 10/8
  network_cidr_prefix: 16
  network_dns_support: True
  network_groups: core

  admin_subnet_cidr_prefix: 28
  admin_subnet_public_ip: True
  admin_groups: cenv

  ssh_port: 22
  admin_port: 5123

  core_firewall_groups: core

  aws_networks:
    - aws-us-east-1
    - aws-us-east-2
    - aws-us-west-1
    - aws-us-west-2
    - aws-ca-central-1
    - aws-sa-east-1
    - aws-eu-central-1
    - aws-eu-west-1
    - aws-eu-west-2
    - aws-eu-west-3
    - aws-ap-northeast-1
    - aws-ap-northeast-2
    - aws-ap-south-1
    - aws-ap-southeast-1
    - aws-ap-southeast-2

  # Ubuntu 18.04LTS hvm:ebs-ssd
  aws_ubuntu_image:
    aws-us-east-1: ami-07073342279f98d28
    aws-us-east-2: ami-02e1499f8253f416f
    aws-us-west-1: ami-09a3ee98385ff6b68
    aws-us-west-2: ami-0e3e4660d8725dd31
    aws-ca-central-1: ami-00a7d7ec7a73de008
    aws-sa-east-1: ami-0100acce7c30020c9
    aws-eu-central-1: ami-015796b0bb7c85278
    aws-eu-west-1: ami-0c21eb76a5574aa2f
    aws-eu-west-2: ami-031e9af9a62a515ca
    aws-eu-west-3: ami-0cf799901ece2e2af
    aws-ap-northeast-1: ami-0238fc6af6bba5241
    aws-ap-northeast-2: ami-0a5732cf00ef2da99
    aws-ap-south-1: ami-0bcc667116a070e40
    aws-ap-southeast-1: ami-033a3bd1e8ea825a5
    aws-ap-southeast-2: ami-0626846f14dbd80e5

network:
  aws-us-east-1:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: us-east-1
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-us-east-2:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: us-east-2
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-us-west-1:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: us-west-1
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-us-west-2:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: us-west-2
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-ca-central-1:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: ca-central-1
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-sa-east-1:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: sa-east-1
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-eu-central-1:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: eu-central-1
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-eu-west-1:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: eu-west-1
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-eu-west-2:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: eu-west-2
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-eu-west-3:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: eu-west-3
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-ap-northeast-1:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: ap-northeast-1
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-ap-northeast-2:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: ap-northeast-2
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-ap-south-1:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: ap-south-1
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-ap-southeast-1:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: ap-southeast-1
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

  aws-ap-southeast-2:
    when_in: "@aws_networks"
    provider: aws
    cidr_base: "@network_cidr_base"
    cidr_prefix: "@network_cidr_prefix"
    region: ap-southeast-2
    dns_support: "@network_dns_support"
    group_names: "@network_groups"

federation:
  aws: "@aws_networks"

subnet:
  admin-1:
    network: "@aws_networks"
    cidr_prefix: "@admin_subnet_cidr_prefix"
    zone_suffix: a
    use_public_ip: "@admin_subnet_public_ip"
    group_names: "@admin_groups"

  admin-2:
    network: "@aws_networks"
    cidr_prefix: "@admin_subnet_cidr_prefix"
    zone_suffix: b
    use_public_ip: "@admin_subnet_public_ip"
    group_names: "@admin_groups"

firewall:
  internet:
    network: "@aws_networks"
    rules:
      all_out:
        mode: egress
        protocol: all
        from_port: 0
        to_port: 0
        cidrs:
          - 0.0.0.0/0
      icmp_in:
        mode: ingress
        protocol: icmp
        from_port: 8
        to_port: 0
        cidrs:
          - 0.0.0.0/0
    group_names: "@core_firewall_groups"

  ssh:
    network: "@aws_networks"
    rules:
      tcp_in:
        mode: ingress
        protocol: tcp
        from_port: "@ssh_port"
        to_port: "@ssh_port"
        cidrs:
          - 0.0.0.0/0
    group_names: "@core_firewall_groups"

  admin:
    network: "@aws_networks"
    rules:
      tcp_in:
        mode: ingress
        protocol: tcp
        from_port: "@admin_port"
        to_port: "@admin_port"
        cidrs:
          - 0.0.0.0/0
    group_names: "@admin_groups"
